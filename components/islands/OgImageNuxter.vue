<script lang="ts" setup>
import type { Contributor } from '~/types'

defineProps<{ contributor: Contributor }>()

defineOptions({
  inheritAttrs: false,
})
const { format } = Intl.NumberFormat('en-GB', {})
</script>

<template>
  <div class="flex flex-row justify-between w-full p-[38px] bg-gray-900">
    <div class="flex flex-col w-1/3 items-center py-10 justify-between text-white">
      <div class="flex flex-col items-center">
        <UAvatar :src="`https://avatars.githubusercontent.com/u/${contributor.githubId}`" size="3xl"
          :ui="{ background: '', size: { '3xl': 'h-32 w-32 text-5xl' } }" />
        <div class="text-3xl pt-[18px]">{{ contributor.username }}</div>
        <div class="pt-12">
          <svg width="119" height="2" viewBox="0 0 119 2" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="0.5" y1="0.882812" x2="118.5" y2="0.882812" stroke="url(#paint0_linear_186_15197)" />
            <defs>
              <linearGradient id="paint0_linear_186_15197" x1="-1.5" y1="1.00029" x2="113" y2="1.00033"
                gradientUnits="userSpaceOnUse">
                <stop stop-color="#CBD5E1" stop-opacity="0" />
                <stop offset="0.494792" stop-color="#CBD5E1" />
                <stop offset="0.979167" stop-color="#CBD5E1" stop-opacity="0" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="flex flex-row text-white items-center pt-12">
          <svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M37.3227 14.4875V14.6091C37.3227 16.0425 37.3227 16.7609 36.9777 17.3475C36.6327 17.9342 36.0044 18.2825 34.751 18.9809L33.4293 19.7142C34.3393 16.6342 34.6443 13.3241 34.756 10.4941L34.7727 10.1257L34.776 10.0391C35.861 10.4157 36.471 10.6974 36.851 11.2241C37.3227 11.8791 37.3227 12.7491 37.3227 14.4875ZM3.98877 14.4875V14.6091C3.98877 16.0425 3.98877 16.7609 4.33378 17.3475C4.67878 17.9342 5.30713 18.2825 6.56048 18.9809L7.88384 19.7142C6.97216 16.6342 6.66715 13.3241 6.55548 10.4941L6.53882 10.1257L6.53715 10.0391C5.45046 10.4157 4.84045 10.6974 4.46044 11.2241C3.98877 11.8791 3.98877 12.7508 3.98877 14.4875Z"
              fill="#F8FAFC" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M20.6553 4.21524C23.6287 4.21524 26.077 4.47691 27.9504 4.79358C29.8488 5.11359 30.7971 5.27359 31.5905 6.25027C32.3838 7.22696 32.3405 8.28198 32.2572 10.392C31.9705 17.6405 30.4071 26.6923 21.9053 27.4923V33.3824H24.2887C24.6738 33.3827 25.047 33.5163 25.3448 33.7606C25.6426 34.0049 25.8465 34.3448 25.922 34.7225L26.2387 36.2992H30.6555C30.987 36.2992 31.3049 36.4309 31.5394 36.6653C31.7738 36.8997 31.9055 37.2176 31.9055 37.5492C31.9055 37.8807 31.7738 38.1987 31.5394 38.4331C31.3049 38.6675 30.987 38.7992 30.6555 38.7992H10.6551C10.3236 38.7992 10.0056 38.6675 9.77119 38.4331C9.53677 38.1987 9.40507 37.8807 9.40507 37.5492C9.40507 37.2176 9.53677 36.8997 9.77119 36.6653C10.0056 36.4309 10.3236 36.2992 10.6551 36.2992H15.0718L15.3885 34.7225C15.464 34.3448 15.668 34.0049 15.9657 33.7606C16.2635 33.5163 16.6367 33.3827 17.0219 33.3824H19.4053V27.4923C10.9051 26.6923 9.34174 17.6388 9.05507 10.392C8.97006 8.28198 8.9284 7.22529 9.72174 6.25027C10.5134 5.27359 11.4618 5.11359 13.3601 4.79358C15.7716 4.39837 18.2117 4.20492 20.6553 4.21524ZM22.242 11.2137L22.0786 10.9204C21.4453 9.782 21.1286 9.21533 20.6553 9.21533C20.1819 9.21533 19.8653 9.782 19.2319 10.9204L19.0686 11.2137C18.8886 11.537 18.7986 11.697 18.6586 11.8037C18.5169 11.9104 18.3419 11.9504 17.9919 12.0287L17.6752 12.102C16.4452 12.3804 15.8302 12.5187 15.6835 12.9887C15.5368 13.4604 15.9569 13.9504 16.7952 14.9304L17.0119 15.1838C17.2502 15.4621 17.3702 15.6004 17.4235 15.7738C17.4769 15.9471 17.4586 16.1321 17.4235 16.5038L17.3902 16.8421C17.2635 18.1505 17.2002 18.8055 17.5819 19.0955C17.9652 19.3855 18.5419 19.1205 19.6936 18.5905L19.9903 18.4538C20.3186 18.3038 20.4819 18.2288 20.6553 18.2288C20.8286 18.2288 20.9919 18.3038 21.3203 18.4538L21.617 18.5905C22.7686 19.1222 23.3453 19.3855 23.7287 19.0955C24.112 18.8055 24.047 18.1505 23.9203 16.8421L23.887 16.5038C23.852 16.1321 23.8337 15.9471 23.887 15.7738C23.9403 15.6021 24.0603 15.4621 24.2987 15.1838L24.5153 14.9304C25.3537 13.9504 25.7737 13.4604 25.627 12.9887C25.4804 12.5187 24.8654 12.3804 23.6353 12.102L23.3187 12.0287C22.9686 11.9504 22.7936 11.912 22.652 11.8037C22.512 11.697 22.422 11.537 22.242 11.2137Z"
              fill="#F8FAFC" />
          </svg>
          <div class="font-medium text-4xl pl-2 pt-1">{{ format(contributor.score) }}</div>
        </div>
      </div>
      <svg width="238" height="43" viewBox="0 0 1091 200" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M168 200H279C282.542 200 285.932 198.756 289 197C292.068 195.244 295.23 193.041 297 190C298.77 186.959 300.002 183.51 300 179.999C299.998 176.488 298.773 173.04 297 170.001L222 41C220.23 37.96 218.067 35.7552 215 34C211.933 32.2448 207.542 31 204 31C200.458 31 197.067 32.2448 194 34C190.933 35.7552 188.77 37.96 187 41L168 74L130 9.99764C128.228 6.95784 126.068 3.75491 123 2C119.932 0.245087 116.542 0 113 0C109.458 0 106.068 0.245087 103 2C99.9323 3.75491 96.7717 6.95784 95 9.99764L2 170.001C0.226979 173.04 0.00154312 176.488 1.90993e-06 179.999C-0.0015393 183.51 0.229648 186.959 2 190C3.77035 193.04 6.93245 195.244 10 197C13.0675 198.756 16.4578 200 20 200H90C117.737 200 137.925 187.558 152 164L186 105L204 74L259 168H186L168 200ZM89 168H40L113 42L150 105L125.491 147.725C116.144 163.01 105.488 168 89 168Z"
          fill="#00DC82" />
        <path
          d="M381 196C381 198.209 379.16 200 377 200H350V50H376C379.479 50 383.248 51.8912 385 55L421 116L439 148V54C439 51.4941 441.202 50 443 50H470V200H443C439.744 200 435.785 197.74 434 194L395 127C386 112 381 103 381 103V196Z"
          fill="#fff" />
        <path
          d="M739 92H726V116H745V160C745 185.071 759.948 200 783 200H800V174H787C778.057 174 773 169.5 773 159V116H800V92H773V60H745V86C745 89.3137 742.314 92 739 92Z"
          fill="#fff" />
        <path
          d="M591 92V154C591 168.004 585.742 179.809 578 188C570.258 196.191 559.566 200 545 200C530.434 200 518.742 196.191 511 188C503.389 179.809 498 168.004 498 154V92H514C517.412 92 520.769 92.622 523 95C525.231 97.2459 526 98.5652 526 102V154C526 162.059 526.457 167.037 530 171C533.543 174.831 537.914 176 545 176C552.217 176 555.457 174.831 559 171C562.543 167.037 563 162.059 563 154V102C563 98.5652 563.769 96.378 566 94C567.941 91.9315 569.987 91.9592 572.912 91.9988L573 92C573.294 92.004 573.979 92.0023 574.497 92.001L574.832 92.0002L575 92H591Z"
          fill="#fff" />
        <path
          d="M710 92L676 144L713 200H687C683.75 200 680.818 197.787 679 195L660 167L642 194C640.182 196.787 637.25 200 634 200H608L645 143L611 92H636C639.277 92 643.188 94.1758 645 97L660 120L676 96C677.812 93.1758 680.723 92 684 92H710Z"
          fill="#fff" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M917 163C914.919 174.215 910.163 183.215 901.005 190C891.846 196.785 880.905 200 868 200C856.621 200 846.187 197.123 838 192C829.952 186.738 824.163 180.308 820 172C815.837 163.692 814 155.138 814 146C814 136.723 815.253 127.169 819 119C822.885 110.831 829.229 104.123 837 99C844.909 93.8769 854.76 92 866 92C877.656 92 887.229 94.0154 895 99C902.771 103.985 908.392 110.246 912 118C915.747 125.754 918 134.415 918 143C918 144.946 917.813 146.941 917.554 148.769C917.286 150.656 915.628 152 913.721 152H841C842.11 159.477 845.56 165.708 850 170C854.579 174.154 859.784 176 867 176C872.828 176 878.525 175.215 882.271 173C886.018 170.646 888.89 167.431 890 163H917ZM866 113C859.339 113 853.885 114.538 850 118C846.115 121.323 843.249 126.8 842 134H889C888.584 127.908 886.024 122.877 882 119C877.976 114.985 872.799 113 866 113Z"
          fill="#fff" />
        <path
          d="M983 118C976.062 118 971.469 120.738 968 126C964.531 131.262 963 138.723 963 148V200H933V92H963V110C965.775 103.631 968.976 98.6308 973 96C977.163 93.3692 982.478 92 989 92H1001V118H983Z"
          fill="#fff" />
        <path
          d="M1019 190C1027.05 196.646 1037.09 200 1050 200C1062.35 200 1072.65 196.954 1080 191C1087.49 184.908 1091 176.969 1091 167C1091 158.277 1089.61 151.569 1086 147C1082.39 142.431 1078 139.523 1073 138C1068.14 136.338 1061.63 135.108 1054 134C1046.92 133.031 1041.33 131.246 1038 130C1034.81 128.615 1033 125.877 1033 122C1033 118.815 1034.5 116.8 1037 115C1039.5 113.2 1042.84 112 1047 112C1051.16 112 1054.67 113.508 1058 116C1061.47 118.354 1063.44 121.708 1064 126H1085C1087.29 126 1089.33 124.27 1089 122C1087.78 113.613 1083.8 106.358 1077 101C1069.23 94.7692 1058.63 92 1046 92C1038.92 92 1032.69 93.2308 1027 96C1021.31 98.6308 1017.33 102.154 1014 107C1010.81 111.708 1009 116.908 1009 123C1009 131.031 1010.67 137.569 1014 142C1017.47 146.292 1021.28 149.338 1026 151C1030.72 152.662 1036.51 154.615 1044 156C1051.22 157.246 1056.67 158.477 1060 160C1063.33 161.523 1065 164.123 1065 168C1065 170.908 1063.91 173.062 1061 175C1058.22 176.938 1054.44 178 1050 178C1044.59 178 1040.47 176.631 1037 174C1033.67 171.231 1031.56 167.708 1031 163H1010C1007.71 163 1005.67 164.737 1006 167C1007.36 176.292 1012.1 184.08 1019 190Z"
          fill="#fff" />
      </svg>
    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <IssuesCard :issues="format(contributor.issues + contributor.helpful_issues)" />
      </div>
      <div class="h-[48%]">
        <PullRequestCard :pullRequests="format(contributor.merged_pull_requests)" />
      </div>
    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <CommentsCard :comments="format(contributor.comments + contributor.helpful_comments)" />
      </div>
      <div class="h-[48%]">
        <ReactionsCard :reactions="format(contributor.reactions)" />
      </div>
    </div>
  </div>
</template>

<style scoped lang="postcss">
.card-border::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background-image: linear-gradient(to bottom right, #00dc82, #1e293b);
  z-index: -1;
}

.card-border {
  z-index: 50;
}

.profile-card {
  background-image: url('http://localhost:3000/card-gradient-bg.svg');
  background-repeat: no-repeat;
  background-size: 300%;
}

.card {
  @apply rounded-xl border bg-no-repeat bg-top p-6 text-center flex flex-col items-center justify-end;
}

.issues-card {
  background-image: linear-gradient(180deg, rgba(0, 220, 130, 0.4) 0%, rgba(0, 220, 130, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/issues-card-bg.svg');
}

.comments-card {
  background-image: linear-gradient(180deg, rgba(64, 187, 255, 0.4) 0%, rgba(64, 187, 255, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/comments-card-bg.svg');
}

.pull-requests-card {
  background-image: linear-gradient(180deg, rgba(139, 92, 246, 0.4) 0%, rgba(139, 92, 246, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/pull-requests-card-bg.svg');
}

.reactions-card {
  background-image: linear-gradient(180deg, rgba(247, 209, 76, 0.4) 0%, rgba(247, 209, 76, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/reactions-card-bg.webp');
}
</style>
